<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Tickle Trio</title>
	<link rel="icon" type="image/png" href="misc/icons8-feather-55.png">
	<style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 0;
            padding: 0;
            background-color: #111111;
			/* code below disables mouse-select behaviour */
			user-select: none;
			-moz-user-select: none;
			-webkit-user-drag: none;
			-webkit-user-select: none;
			-ms-user-select: none;
        }
		
        img {
			height: 460px;
			width: 345px;
			border: 15px solid rgba(0, 0, 0, 1);
        }
		
		#cards {
			height: 640px;
			display: flex;
			justify-content: space-evenly;
            background-color: #111111;
			cursor: pointer;
		}
		
		#card1, #card2, #card3 {
			color: #dddddd;
			font-size: 1.25rem;
			font-style: italic;
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
		}
						
		#card1-name, #card2-name, #card3-name {
			padding-bottom: 15px;
		}

		#title {
			color: #ffffff;
			font-size: 1rem;
			font-weight: bold;
			background-color: #222222;
			text-align: center;
			display: flex;
			align-items: center;
			justify-content: center;
			height: 40px;
		}

		#button {
			color: #dddddd;
			font-size: 1rem;
			font-weight: bold;
			background-color: #222222;
			text-align: center;
			display: flex;
			align-items: center;
			justify-content: center;
			height: 40px;
			cursor: pointer;
			text-decoration: none;
			transition: background-color 0.3s;
		}

		@keyframes fadeIn {
			0% { opacity: 0 }
			100% { opacity: 1 }
		}
		
		@keyframes fadeOut {
			0% { opacity: 1 }
			100% { opacity: 0 }
		}

		.fadeIn1 {
			opacity: 0;
			transition: opacity ease-in-out;
			animation: fadeIn 2s .3s forwards;
		}
		
		.fadeIn2 {
			opacity: 0;
			transition: opacity ease-in-out;
			animation: fadeIn 2s 1.3s forwards;
		}
		
		.fadeIn3 {
			opacity: 0;
			transition: opacity ease-in-out;
			animation: fadeIn 2s 2.3s forwards;
		}
		
		.fadeOut {
			opacity: 1;
			transition: opacity ease-in-out;
			animation: fadeOut 1s .5s forwards;
		}
    </style>
</head>
<body>
    <div id="container">
		<div id="title"></div>
		<div id="cards">
			<div id="card1">
				<div id="card1-name"></div>
				<img id="one" alt="one">
			</div>
			<div id="card2">
				<div id="card2-name"></div>
				<img id="two" alt="two">
			</div>
			<div id="card3">
				<div id="card3-name"></div>
				<img id="three" alt="three">
			</div>
		</div>
		<div id="button"></div>
    </div>

    <script>
	    const titles = [
			"The Tickle Trio",
			"Choose your favorite tickler!"
        ];
		
		const cardUrls = [
			'misc/CardBack.png',		
		];

		const petraUrls = [
			'petra/PETRA-001.png',
			'petra/PETRA-002.png',
			'petra/PETRA-003.png',
		];
		
		const piaUrls = [
			'pia/PIA-001.png',
			'pia/PIA-002.png',
			'pia/PIA-003.png',
		];
		
		const lunaUrls = [
			'luna/LUNA-001.png',
			'luna/LUNA-002.png',
			'luna/LUNA-003.png',
		];

		const buttons = [
			'Click Here To Begin',
			'Shuffle the Trio?'
        ];

		const cardNames = [
			'PETRA',
			'PIA',
			'LUNA'
        ];
		
		let mainMenu = true;
		let firstShuffle = true;
		let selectionMade = false;
		let selectedTickler;

		const titleElement = document.getElementById('title');
			
		const cardsElement = document.getElementById('cards');
		const card1Element = document.getElementById('card1');
		const card2Element = document.getElementById('card2');
		const card3Element = document.getElementById('card3');
					
		const card1nameElement = document.getElementById('card1-name');
		const card2nameElement = document.getElementById('card2-name');
		const card3nameElement = document.getElementById('card3-name');
					
		const oneElement = document.getElementById('one');
        const twoElement = document.getElementById('two');
        const threeElement = document.getElementById('three');
		
		const buttonElement = document.getElementById('button');
				
		function initialize() {
            card1nameElement.style.display = 'none';
            card2nameElement.style.display = 'none';
            card3nameElement.style.display = 'none';
			
            titleElement.textContent = titles[0];
            oneElement.src = cardUrls[0];
			twoElement.src = cardUrls[0];
			threeElement.src = cardUrls[0];
            buttonElement.textContent = buttons[0];

			card1Element.classList.add('fadeIn1');
			card2Element.classList.add('fadeIn2');
			card3Element.classList.add('fadeIn3');
				
			cardsElement.addEventListener('click', function() {
				if (mainMenu && !selectionMade) {
					reset();
				}
			});

			buttonElement.addEventListener('mouseenter', function() {
				if (!selectionMade) {
					this.style.color = "#ffff00";
				} else {
					this.style.color = "#dddddd";
				}
			});
			
			buttonElement.addEventListener('mouseleave', function() {
					this.style.color = "#dddddd";
			});
			
			buttonElement.addEventListener('click', function() {
				if (!selectionMade) {
					reset();
				}
			});
			
			document.addEventListener('keydown', (event) => {
				if (event.code === 'Space' && !selectionMade) {
					event.preventDefault();
					reset();
				}
			});
		}
		
		function reset() {
				mainMenu = false;
				firstShuffle = true;
				selectionMade = true;
				setTimeout(function() {
					selectionMade = false;
				}, 3000);
				selectedTickler = null;
				generate();
		}

        function generate() {
			const randomPetra = Math.floor(Math.random() * petraUrls.length);
			const randomPia = Math.floor(Math.random() * piaUrls.length);
			const randomLuna = Math.floor(Math.random() * lunaUrls.length);

            card1nameElement.style.display = 'block';
            card2nameElement.style.display = 'block';
            card3nameElement.style.display = 'block';
			
            titleElement.textContent = titles[1];
			buttonElement.textContent = buttons[1];
			
			if (selectedTickler !== 'petra') {
				oneElement.src = petraUrls[randomPetra];
			}
			
			if (selectedTickler !== 'pia') {
				twoElement.src = piaUrls[randomPia];
			}
			
			if (selectedTickler !== 'luna') {
				threeElement.src = lunaUrls[randomLuna];			
			}
			
			card1nameElement.textContent = cardNames[0];
			card2nameElement.textContent = cardNames[1];
			card3nameElement.textContent = cardNames[2];
			
			oneElement.style.border = "15px solid rgba(0, 0, 0, 1)";
			twoElement.style.border = "15px solid rgba(0, 0, 0, 1)";
			threeElement.style.border = "15px solid rgba(0, 0, 0, 1)";
			
			card1Element.classList.remove('fadeIn1');
			card2Element.classList.remove('fadeIn1');
			card3Element.classList.remove('fadeIn1');
			card2Element.classList.remove('fadeIn2');
			card3Element.classList.remove('fadeIn3');
			card1Element.classList.remove('fadeOut');
			card2Element.classList.remove('fadeOut');
			card3Element.classList.remove('fadeOut');
						
			void buttonElement.offsetWidth;

			if (firstShuffle) {
				card1Element.classList.add('fadeIn1');
				card2Element.classList.add('fadeIn2');
				card3Element.classList.add('fadeIn3');
			} else {
				if (selectedTickler !== 'petra') {
					card1Element.classList.add('fadeIn1');
				}
				
				if (selectedTickler !== 'pia') {
					card2Element.classList.add('fadeIn1');
				}
				
				if (selectedTickler !== 'luna') {
					card3Element.classList.add('fadeIn1');
				}
			}
			
			firstShuffle = false;			
			
			card1Element.addEventListener('click', function() {
				if (!selectionMade) {
					selectionMade = true;
					selectedTickler = 'petra';
						
					oneElement.style.border = "15px solid rgba(255, 255, 0, 1)";
					twoElement.style.border = "15px solid rgba(0, 0, 0, 1)";
					threeElement.style.border = "15px solid rgba(0, 0, 0, 1)";
					card1Element.style.color = '#ffff00';

					setTimeout(function() {
						card1Element.style.color = '#dddddd';
						}, 2500);
					
					setTimeout(function() {
						oneElement.style.border = "15px solid rgba(0, 0, 0, 1)";
						}, 5000);
							
					card2Element.classList.add('fadeOut');
					card3Element.classList.add('fadeOut');
					
					setTimeout(function() {
						generate();
						}, 2500);
						
					setTimeout(function() {
						selectionMade = false;
						}, 3000);
				}
			});
 		
			card2Element.addEventListener('click', function() {
				if (!selectionMade) {
					selectionMade = true;
					selectedTickler = 'pia';
					
					oneElement.style.border = "15px solid rgba(0, 0, 0, 1)";
					twoElement.style.border = "15px solid rgba(255, 255, 0, 1)";
					threeElement.style.border = "15px solid rgba(0, 0, 0, 1)";
					card2Element.style.color = '#ffff00';

					setTimeout(function() {
						card2Element.style.color = '#dddddd';
						}, 2500);

					setTimeout(function() {
						twoElement.style.border = "15px solid rgba(0, 0, 0, 1)";
						}, 5000);
							
					card1Element.classList.add('fadeOut');
					card3Element.classList.add('fadeOut');
					
					setTimeout(function() {
						generate();
						}, 2500);
						
					setTimeout(function() {
						selectionMade = false;
						}, 3000);
				}
			});
		
			card3Element.addEventListener('click', function() {
				if (!selectionMade) {
					selectionMade = true;
					selectedTickler = 'luna';
					
					oneElement.style.border = "15px solid rgba(0, 0, 0, 1)";
					twoElement.style.border = "15px solid rgba(0, 0, 0, 1)";
					threeElement.style.border = "15px solid rgba(255, 255, 0, 1)";
					card3Element.style.color = '#ffff00';
					
					setTimeout(function() {
						card3Element.style.color = '#dddddd';
						}, 2500);
					
					setTimeout(function() {
						threeElement.style.border = "15px solid rgba(0, 0, 0, 1)";
						}, 5000);
							
					card1Element.classList.add('fadeOut');
					card2Element.classList.add('fadeOut');
					
					setTimeout(function() {
						generate();
						}, 2500);
						
					setTimeout(function() {
						selectionMade = false;
						}, 3000);
				}
			});
		}
		
	initialize();
    </script>
</body>
</html>