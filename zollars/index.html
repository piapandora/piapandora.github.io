<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zollars</title>
    <link rel="icon" type="image/png" href="misc/icons8-feather-55.png">
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #615677;
            padding: 2rem;
        }

        main {
            max-width: 600px;
            margin: 0 auto;
            padding: 2rem;
        }

        .container {
            background-color: #202030;
            padding: 10px 15px;
            margin: 10px 0;
            border-radius: 10px;
			box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.5);
            opacity: 0;
            transition: opacity 1s ease-in-out;
        }
		
		img {
			width: 8.7em;
			height: 6.75em;
			border-radius: 50%;
			margin-top: 22.33px;
			border: 6.66px solid #000;
			box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.4);
		}

        #logo {
            opacity: 0;
            transition: opacity 2s 1s ease-in-out;
        }

        h1 {
            font-size: 2.25em;
            font-weight: bold;
            color: #FFD700;
			text-shadow: 3px 3px 8px rgba(0, 0, 0, 0.75);
        }

        #title {
            opacity: 0;
            transition: opacity 2s 1.66s ease-in-out;
        }

        .hyphen {
            color: white;
        }

        .loading {
            display: none;
            font-size: 1.5em;
            color: #F1E1B3;
        }

        .price {
            font-size: 1.5em;
            font-weight: normal;
            color: #F1E1B3;
			text-shadow: 3px 3px 8px rgba(0, 0, 0, 0.75);
        }
        
        #prices {
            margin-top: 20px;
            opacity: 0;
            transition: opacity 2s 2.33s ease-in-out;
        }

        .total-price {
            font-size: 2em;
            font-weight: bold;
            color: #fff;
			text-shadow: 3px 3px 8px rgba(0, 0, 0, 0.75);
        }

        #total {
            opacity: 0;
            transition: opacity 2s 3s ease-in-out;
        }
    </style>
</head>
<body>
    <main>
        <div class="container">
			<img id="logo">
            <h1 id="title"><span class="hyphen">-</span> ZOLLARS <span class="hyphen">-</span></h1>
            <div id="prices">
                <p id="btcPriceField" class="price"></p>
                <p id="ethPriceField" class="price"></p>
                <p id="solPriceField" class="price"></p>
                <p id="total" class="total-price"></p>
            </div>
        </div>
    </main>

    <script>
        const container = document.getElementsByClassName("container")[0];
        const logo = document.getElementById("logo");
        const logos = ["misc/logo-1.jpg", "misc/logo-2.jpg", "misc/logo-3.jpg"];
        const title = document.getElementById("title");
        const prices = document.getElementById("prices");
        const btcPriceField = document.getElementById("btcPriceField");
        const ethPriceField = document.getElementById("ethPriceField");
        const solPriceField = document.getElementById("solPriceField");
        const total = document.getElementById("total");

        function randomSelection(array) {
            return array[Math.floor(Math.random() * array.length)];
        }

        function promptPassword() {
    		const selection = prompt("Password?");

            if (selection === null) {
                incorrectPassword();
                return;
            }

            if (selection.trim() === String.fromCharCode(49,50,48,54,51,49)) {
                initialize();
            } else {
                incorrectPassword();
            }
        }

        function incorrectPassword() {
            container.style.opacity = '1';

            logo.src = randomSelection(logos);
            logo.style.width = "20em";
            logo.style.height = "20em";
            logo.style.marginTop = "65.5px";
            logo.style.marginBottom = "65.5px";
            logo.style.opacity = "1";
            
            title.remove();
            prices.remove();
        }

        function initialize() {
            const bitcoinAmount = 0.1;
            const ethereumAmount = 0.44;
            const solanaAmount = 5;
            let errorCount = 0;

            const apiUrl = 'https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum,solana&vs_currencies=usd';
            async function fetchCryptoPrices() {
                setTimeout(function() {
                    container.style.opacity = '1';
                    logo.src = "misc/logo.jpg";
                    logo.style.opacity = '1';
                    title.style.opacity = '1';
                    prices.style.opacity = '1';
                    total.style.opacity = '1';
                }, 1000);

                try {
                    const response = await fetch(apiUrl);
                    const data = await response.json();

                    const btcPrice = data.bitcoin.usd * bitcoinAmount;
                    const ethPrice = data.ethereum.usd * ethereumAmount;
                    const solPrice = data.solana.usd * solanaAmount;
                    const grandTotal = btcPrice + ethPrice + solPrice;

                    btcPriceField.innerText = `${bitcoinAmount} BTC - $${btcPrice.toLocaleString()}`;
                    ethPriceField.innerText = `${ethereumAmount} ETH - $${ethPrice.toLocaleString()}`;
                    solPriceField.innerText = `${solanaAmount} SOL - $${solPrice.toLocaleString()}`;
                    total.innerText = `$${grandTotal.toLocaleString()}`;
                    
                } catch (error) {
                    console.error('Error fetching the crypto prices:', error);
                    errorCount++;
                    btcPriceField.innerText = 'Error fetching data';
                    ethPriceField.innerText = 'Error fetching data';
                    solPriceField.innerText = 'Error fetching data';
                    if (errorCount < 3) {
                        setTimeout(fetchCryptoPrices, 2000);
                    }
                }
            }

            fetchCryptoPrices();
        }

        promptPassword();
    </script>
</body>
</html>