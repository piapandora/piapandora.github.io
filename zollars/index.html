<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zollars</title>
    <link rel="icon" type="image/png" href="misc/icons8-feather-55.png">
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #615677;
            padding: 4rem 1.5rem 2rem 1.5rem;
        }

        main {
            max-width: 600px;
            margin: 0 auto;
        }

        button {
            background-color: #F1E1B3;
            color: #000;
            font-size: 1em;
            font-weight: normal;
            margin: 7px;
            padding: 0.5rem;
            border-radius: 10px;
            box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.5);
        }

        #numpad {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 0.33rem;
            padding: 5.09rem 4rem;
            opacity: 0;
            transition: opacity 2s ease-in-out;
        }

        .container1 {
            background-color: #202030;
            background-image: linear-gradient(rgba(0, 0, 0, 0.33), rgba(0, 0, 0, 0.33)), url('misc/logo-2.jpg');
            background-size: cover;
            background-position: center center;
            background-repeat: no-repeat;
            border-radius: 10px;
            box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.5);
            opacity: 0;
            transition: opacity 1s ease-in-out;
        }

        .container2 {
            background-color: #202030;
            padding: 10px 0;
            border-radius: 10px;
            box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.5);
            opacity: 0;
            transition: opacity 1s ease-in-out;
        }
        
        img {
            border-radius: 50%;
            margin-top: 27px;
            border: 6.66px solid #000;
            box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.4);
        }

        #logo {
            width: 8.7em;
            height: 6.75em;
            opacity: 0;
            transition: opacity 2s 1s ease-in-out;
        }

        h1 {
            font-size: 2.25em;
            font-weight: bold;
            color: #FFD700;
            text-shadow: 3px 3px 8px rgba(0, 0, 0, 0.75);
        }

        #title {
            opacity: 0;
            transition: opacity 2s 1.66s ease-in-out;
        }

        .hyphen {
            color: white;
        }

        .price {
            font-size: 1.33em;
            font-weight: normal;
            color: #F1E1B3;
            text-shadow: 3px 3px 8px rgba(0, 0, 0, 0.75);
        }

        #prices {
            line-height: 0.75;
            opacity: 0;
            transition: opacity 2s 2.33s ease-in-out;
        }

        .total-price {
            padding-top: 0.75rem;
            font-size: 1.6em;
            font-weight: bold;
            color: #fff;
            text-shadow: 3px 3px 8px rgba(0, 0, 0, 0.75);
        }

        #total {
            opacity: 0;
            transition: opacity 2s 3s ease-in-out;
        }

        .tooltip {
            position: relative;
            display: block;
            margin-bottom: 10px;
        }

        .tooltip .tooltip-text {
            display: none;
            opacity: 1;
            position: absolute;
            background-color: black;
            color: white;
            padding: 5px;
            border-radius: 5px;
            transition: opacity 0.3s;
            z-index: 1;
            bottom: 120.5%;
            left: 50%;
            transform: translateX(-50%);
            white-space: nowrap;
        }

        @media (max-width: 720px) {
            body {
                padding: 4rem 1rem 1rem 1rem;
            }

            main {
                max-width: 400px;
            }

            h1 {
                font-size: 2em;
            }

            #numpad {
                grid-template-columns: repeat(5, minmax(40px, 1fr));
                gap: 1rem;
                padding: 1rem;
                opacity: 0;
                transition: opacity 2s ease-in-out;
            }

            button {
                margin: 0;
                font-size: 1.1em;
                padding: 0.5rem;
                touch-action: manipulation;
            }

            .price {
                font-size: 1.25em;
            }

            .total-price {
                font-size: 1.66em;
            }
        }

    </style>
</head>

<body>
    <main>
        <section class="container1">
            <div id="numpad">
                <button id="btn-01">01</button>
                <button id="btn-02">02</button>
                <button id="btn-03">03</button>
                <button id="btn-04">04</button>
                <button id="btn-05">05</button>
                <button id="btn-06">06</button>
                <button id="btn-07">07</button>
                <button id="btn-08">08</button>
                <button id="btn-09">09</button>
                <button id="btn-10">10</button>
                <button id="btn-11">11</button>
                <button id="btn-12">12</button>
                <button id="btn-13">13</button>
                <button id="btn-14">14</button>
                <button id="btn-15">15</button>
                <button id="btn-16">16</button>
                <button id="btn-17">17</button>
                <button id="btn-18">18</button>
                <button id="btn-19">19</button>
                <button id="btn-20">20</button>
                <button id="btn-21">21</button>
                <button id="btn-22">22</button>
                <button id="btn-23">23</button>
                <button id="btn-24">24</button>
                <button id="btn-25">25</button>
                <button id="btn-26">26</button>
                <button id="btn-27">27</button>
                <button id="btn-28">28</button>
                <button id="btn-29">29</button>
                <button id="btn-30">30</button>
                <button id="btn-31">31</button>
                <button id="btn-32">32</button>
                <button id="btn-33">33</button>
                <button id="btn-34">34</button>
                <button id="btn-35">35</button>
                <button id="btn-36">36</button>
                <button id="btn-37">37</button>
                <button id="btn-38">38</button>
                <button id="btn-39">39</button>
                <button id="btn-40">40</button>
            </div>
        </section>
        <section class="container2">
            <div id="logo-tooltip" class="tooltip">
                <img id="logo" src="" alt="App Logo">
                <span id="logo-tooltip-text" class="tooltip-text"></span>
            </div>
            <h1 id="title"><span class="hyphen">-</span> ZOLLARS <span class="hyphen">-</span></h1>
            <div id="prices">
                <p id="tetherPriceField" class="price">...</p>
                <p id="btcPriceField" class="price">...</p>
                <p id="ethPriceField" class="price">...</p>
                <p id="solPriceField" class="price">...</p>
                <p id="suiPriceField" class="price">...</p>
                <p id="paxgPriceField" class="price">...</p>
                <p id="futuresPriceField" class="price">...</p>
                <p id="total" class="total-price">...</p>
                <p id="total-in-try" class="total-price">...</p>
                <p id="total-in-btc" class="total-price">...</p>
            </div>
        </section>
    </main>

    <script>
        const container1 = document.getElementsByClassName("container1")[0];
        const container2 = document.getElementsByClassName("container2")[0];
        const logo = document.getElementById("logo");
        const logos = ["misc/logo-1.jpg", "misc/logo-2.jpg", "misc/logo-3.jpg"];
        const numpad = document.getElementById("numpad");
        const buttons = document.querySelectorAll("button");
        const clickedState = {};
        const title = document.getElementById("title");
        const prices = document.getElementById("prices");
        const tetherPriceField = document.getElementById("tetherPriceField");
        const btcPriceField = document.getElementById("btcPriceField");
        const ethPriceField = document.getElementById("ethPriceField");
        const solPriceField = document.getElementById("solPriceField");
        const suiPriceField = document.getElementById("suiPriceField");
        const paxgPriceField = document.getElementById("paxgPriceField");
        const futuresPriceField = document.getElementById("futuresPriceField");
        const total = document.getElementById("total");
        const totalInTry = document.getElementById("total-in-try");
        const totalInBtc = document.getElementById("total-in-btc");
        const totalTooltips = document.getElementById("total-tooltips");

        let nessyOK = false;
        let refreshTimer = 0;
        let showingCurrency = 0;
        let tooltipFlag = true;

        let TTtether = 0;
        let TTbtc = 0;
        let TTeth = 0;
        let TTsol = 0;
        let TTsui = 0;
        let TTpaxg = 0;
        let TTfutures = 0;
        
        const logoTooltipElement = document.getElementById('logo-tooltip');
        const logoTooltipText = document.getElementById('logo-tooltip-text');
        const tetherTooltipText = document.getElementById('tether-tooltip-text');
        const btcTooltipText = document.getElementById('btc-tooltip-text');
        const ethTooltipText = document.getElementById('eth-tooltip-text');
        const solTooltipText = document.getElementById('sol-tooltip-text');
        const suiTooltipText = document.getElementById('sui-tooltip-text');
        const paxgTooltipText = document.getElementById('paxg-tooltip-text');
        const futuresTooltipText = document.getElementById('futures-tooltip-text');
        const totalTooltipText = document.getElementById('total-tooltip-text');

        title.addEventListener("mouseover", function() {
            logoTooltipText.style.display = "block";
            logoTooltipText.textContent = '- Zollars Risk-Managed Crypto Fund -';
        });

        title.addEventListener("mouseleave", function() {
            logoTooltipText.style.display = "none";
        });

        tetherPriceField.addEventListener("mouseover", function() {
            logoTooltipText.style.display = "block";
            logoTooltipText.textContent = `Current Price of Tether = $${TTtether.toLocaleString()}`;
        });

        tetherPriceField.addEventListener("mouseleave", function() {
            logoTooltipText.style.display = "none";
        });
        
        btcPriceField.addEventListener("mouseover", function() {
            logoTooltipText.style.display = "block";
            logoTooltipText.textContent = `Current Price of Bitcoin = $${TTbtc.toLocaleString()}`;
        });

        btcPriceField.addEventListener("mouseleave", function() {
            logoTooltipText.style.display = "none";
        });

        ethPriceField.addEventListener("mouseover", function() {
            logoTooltipText.style.display = "block";
            logoTooltipText.textContent = `Current Price of Ethereum = $${TTeth.toLocaleString()}`;
        });

        ethPriceField.addEventListener("mouseleave", function() {
            logoTooltipText.style.display = "none";
        });

        solPriceField.addEventListener("mouseover", function() {
            logoTooltipText.style.display = "block";
            logoTooltipText.textContent = `Current Price of Solana = $${TTsol.toLocaleString()}`;
        });

        solPriceField.addEventListener("mouseleave", function() {
            logoTooltipText.style.display = "none";
        });

        suiPriceField.addEventListener("mouseover", function() {
            logoTooltipText.style.display = "block";
            logoTooltipText.textContent = `Current Price of Sui = $${TTsui.toLocaleString()}`;
        });

        suiPriceField.addEventListener("mouseleave", function() {
            logoTooltipText.style.display = "none";
        });

        paxgPriceField.addEventListener("mouseover", function() {
            logoTooltipText.style.display = "block";
            logoTooltipText.textContent = `Current Price of PAX Gold = $${TTpaxg.toLocaleString()}`;
        });

        paxgPriceField.addEventListener("mouseleave", function() {
            logoTooltipText.style.display = "none";
        });

        futuresPriceField.addEventListener("mouseover", function() {
            logoTooltipText.style.display = "block";
            logoTooltipText.textContent = `Funds in Binance Futures = ~$${TTfutures.toLocaleString()}`;
        });

        futuresPriceField.addEventListener("mouseleave", function() {
            logoTooltipText.style.display = "none";
        });

        total.addEventListener("mouseover", function() {
            logoTooltipText.style.display = "block";
            logoTooltipText.textContent = "Grand Total in USD";
        });

        total.addEventListener("mouseleave", function() {
            logoTooltipText.style.display = "none";
        });

        totalInTry.addEventListener("mouseover", function() {
            logoTooltipText.style.display = "block";
            logoTooltipText.textContent = "Grand Total in TL";
        });

        totalInTry.addEventListener("mouseleave", function() {
            logoTooltipText.style.display = "none";
        });

        totalInBtc.addEventListener("mouseover", function() {
            logoTooltipText.style.display = "block";
            logoTooltipText.textContent = "Grand Total in BTC";
        });

        totalInBtc.addEventListener("mouseleave", function() {
            logoTooltipText.style.display = "none";
        });

        logo.addEventListener("mouseover", function() {
            logoTooltipText.style.display = "block";
            if (showingCurrency % 3 === 0) {
                logoTooltipText.textContent = "Show Total in USD?";
            } else if (showingCurrency % 3 === 1){
                logoTooltipText.textContent = "Show Total in TL?";
            } else if (showingCurrency % 3 === 2){
                logoTooltipText.textContent = "Show Total in BTC?";
            }
        });

        logo.addEventListener("mouseleave", function() {
            logoTooltipText.style.display = "none";
        });

        buttons.forEach((button, index) => {
            const id = button.id;
            clickedState[id] = false;

            button.addEventListener("click", function() {
                if (nessyOK) return;

                if (!clickedState[id]) {
                    button.style.backgroundColor = "#FFD700";
                    clickedState[id] = true;
                    nessyCheck();
                } else {
                    button.style.backgroundColor = "#F1E1B3";
                    clickedState[id] = false;
                    nessyCheck();
                }
            });
        });

        function randomSelection(array) {
            return array[Math.floor(Math.random() * array.length)];
        }

        function showNumpad() {
            container2.style.display = "none";
            container1.style.display = "block";

            requestAnimationFrame(() => {
                // Let browser register display:block first
                requestAnimationFrame(() => {
                    container1.style.opacity = '1';
                });
            });

            setTimeout(function () {
                requestAnimationFrame(() => {
                    numpad.style.opacity = '1';
                });
            }, 1000)
        }

        function nessyCheck() {
            const nessy = [
                String.fromCharCode(98, 116, 110, 45, 48, 54),
                String.fromCharCode(98, 116, 110, 45, 49, 50),
                String.fromCharCode(98, 116, 110, 45, 51, 49)
            ];

            let allNessy = false;
            let noExtra = true;

            if (nessy.every(id => clickedState[id])) {
                allNessy = true;
            }

            for (const id in clickedState) {
                if (!nessy.includes(id) && clickedState[id]) {
                    noExtra = false;
                    break;
                }
            }

            if (allNessy && noExtra) {
                nessyOK = true;

                requestAnimationFrame(() => {
                    numpad.style.opacity = '0';
                });

                setTimeout(function () {
                    requestAnimationFrame(() => {
                        container1.style.opacity = '0';
                    });
                    setTimeout(function () {
                        initialize();
                        setInterval(function () {
                            initialize();
                            refreshTimer++;
                            console.log(`Refreshed at ${new Date().toLocaleTimeString()} (${refreshTimer})`);
                        }, 60000)
                    }, 1000);
                }, 2000);
            }
        }

        function promptPassword() {
            const selection = prompt("Password?");

            if (selection === null) {
                incorrectPassword();
                return;
            }

            if (selection.trim() === "062028") {
                initialize();
            } else {
                incorrectPassword();
            }
        }

        function incorrectPassword() {
            container.style.opacity = '1';

            logo.src = randomSelection(logos);
            logo.style.width = "20em";
            logo.style.height = "20em";
            logo.style.marginTop = "65.5px";
            logo.style.marginBottom = "65.5px";
            logo.style.opacity = "1";

            title.remove();
            prices.remove();
        }

        function initialize() {
            const tetherAmount = 3220;
            const bitcoinAmount = 0;
            const ethereumAmount = 0;
            const solanaAmount = 0;
            const suiAmount = 0;
            const paxgAmount = 1;
            const futuresAmount = 0;

            tetherPriceField.style.display = tetherAmount === 0 ? "none" : "block";
            btcPriceField.style.display = bitcoinAmount === 0 ? "none" : "block";
            ethPriceField.style.display = ethereumAmount === 0 ? "none" : "block";
            solPriceField.style.display = solanaAmount === 0 ? "none" : "block";
            suiPriceField.style.display = suiAmount === 0 ? "none" : "block";
            paxgPriceField.style.display = paxgAmount === 0 ? "none" : "block";
            futuresPriceField.style.display = futuresAmount === 0 ? "none" : "block";
            
            if (tooltipFlag) {
                toggleUnitOfTotal();
                tooltipFlag = false;
            }

            let errorCount = 0;

            const apiUrl = 'https://api.coingecko.com/api/v3/simple/price?ids=tether,bitcoin,ethereum,solana,sui,pax-gold&vs_currencies=usd';
            const tryApiUrl = 'https://api.coingecko.com/api/v3/simple/price?ids=tether&vs_currencies=try'

            async function fetchCryptoPrices() {
                container1.style.display = "none";
                container2.style.display = "block";

                requestAnimationFrame(() => {
                    // Let browser register display:block first
                    requestAnimationFrame(() => {
                        container2.style.opacity = '1';

                        logo.src = "misc/logo.jpg";
                        logo.style.opacity = '1';

                        title.style.opacity = '1';
                        prices.style.opacity = '1';
                        total.style.opacity = '1';
                    });
                });

                try {
                    const response = await fetch(apiUrl);
                    const responseTry = await fetch(tryApiUrl);

                    const data = await response.json();
                    const dataTry = await responseTry.json();

                    const tetherPrice = data.tether.usd * tetherAmount;
                    const btcPrice = data.bitcoin.usd * bitcoinAmount;
                    const ethPrice = data.ethereum.usd * ethereumAmount;
                    const solPrice = data.solana.usd * solanaAmount;
                    const suiPrice = data.sui.usd * suiAmount;
                    const paxgPrice = data["pax-gold"].usd * paxgAmount;
                    const futuresPrice = futuresAmount;
                    
                    const grandTotal = tetherPrice + btcPrice + ethPrice + solPrice + suiPrice + paxgPrice + futuresAmount;
                    const grandTotalInTry = grandTotal * dataTry.tether.try;
                    const grandTotalInBtc = grandTotal / data.bitcoin.usd;
                    
                    const tetherAlloc = Math.round((tetherPrice * 100) / grandTotal);
                    const btcAlloc = Math.round((btcPrice * 100) / grandTotal);
                    const ethAlloc = Math.round((ethPrice * 100) / grandTotal);
                    const solAlloc = Math.round((solPrice * 100) / grandTotal);
                    const suiAlloc = Math.round((suiPrice * 100) / grandTotal);
                    const paxgAlloc = Math.round((paxgPrice * 100) / grandTotal);
                    const futuresAlloc = Math.round((futuresPrice * 100) / grandTotal);

                    tetherPriceField.innerText = `${tetherAmount} USDT ∙ ∙ $${Math.round(tetherPrice).toLocaleString()} ∙ ∙ ${tetherAlloc}%`;
                    btcPriceField.innerText = `${bitcoinAmount} BTC ∙ ∙ $${Math.round(btcPrice).toLocaleString()} ∙ ∙ ${btcAlloc}% `;
                    ethPriceField.innerText = `${ethereumAmount} ETH ∙ ∙ $${Math.round(ethPrice).toLocaleString()} ∙ ∙ ${ethAlloc}%`;
                    solPriceField.innerText = `${solanaAmount} SOL ∙ ∙ $${Math.round(solPrice).toLocaleString()} ∙ ∙ ${solAlloc}%`;
                    suiPriceField.innerText = `${suiAmount} SUI ∙ ∙ $${Math.round(suiPrice).toLocaleString()} ∙ ∙ ${suiAlloc}%`;
                    paxgPriceField.innerText = `${paxgAmount} PAXG ∙ ∙ $${Math.round(paxgPrice).toLocaleString()} ∙ ∙ ${paxgAlloc}%`;
                    futuresPriceField.innerText = `FUTURES ∙ ∙ $${futuresPrice} ∙ ∙ ${futuresAlloc}%`;
                    
                    total.innerText = `$${Math.round(grandTotal).toLocaleString()}`;
                    totalInTry.innerText = `${Math.round(grandTotalInTry).toLocaleString()} TL`;
                    // totalInBtc.innerText = `${grandTotalInBtc.toLocaleString()} BTC`;
					totalInBtc.innerText = `${grandTotalInBtc.toLocaleString(undefined, { minimumFractionDigits: 0, maximumFractionDigits: 4 })} BTC`;


                    TTtether = data.tether.usd;
                    TTbtc = Math.round(data.bitcoin.usd);
                    TTeth = Math.round(data.ethereum.usd);
                    TTsol = Math.round(data.solana.usd);
                    TTsui = data.sui.usd;
                    TTpaxg = data["pax-gold"].usd;
                    TTfutures = futuresPrice;
                } catch (error) {
                    console.error('Error fetching the crypto prices:', error);
                    errorCount++;

                    tetherPriceField.innerText = 'Error fetching data';
                    btcPriceField.innerText = 'Error fetching data';
                    ethPriceField.innerText = 'Error fetching data';
                    solPriceField.innerText = 'Error fetching data';
                    suiPriceField.innerText = 'Error fetching data';
                    paxgPriceField.innerText = 'Error fetching data';
                    futuresPriceField.innerText = 'Error fetching data';

                    if (errorCount < 3) {
                        setTimeout(fetchCryptoPrices, 10000);
                    }
                }
            }

            fetchCryptoPrices();
        }

        function toggleUnitOfTotal() {
            if (showingCurrency % 3 === 0) {
                total.style.display = "block";
                totalInTry.style.display = "none";
                totalInBtc.style.display = "none";
                logoTooltipText.textContent = "Show Total in TL?";
                console.log("Showing Total in USD");
                showingCurrency++;
            } else if (showingCurrency % 3 === 1){
                total.style.display = "none";
                totalInTry.style.display = "block";
                totalInBtc.style.display = "none";
                logoTooltipText.textContent = "Show Total in BTC?";
                console.log("Showing Total in TL");
                showingCurrency++;
            } else if (showingCurrency % 3 === 2){
                total.style.display = "none";
                totalInTry.style.display = "none";
                totalInBtc.style.display = "block";
                logoTooltipText.textContent = "Show Total in USD?";
                console.log("Showing Total in BTC");
                showingCurrency = 0;
            }
        }

        logo.addEventListener('click', function() {
            toggleUnitOfTotal();
        });

        const lightMode = false;
        lightMode ? initialize() : showNumpad();
    </script>
</body>
</html>














